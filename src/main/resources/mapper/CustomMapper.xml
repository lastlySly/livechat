<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.lastlysly.mapper.CustomMapper">

    <resultMap id="MyBaseResultMap" type="cn.lastlysly.pojo.UserinfoSheet">
        <result column="user_id" jdbcType="VARCHAR" property="userId" />
        <result column="user_login_id" jdbcType="VARCHAR" property="userLoginId" />
        <result column="user_nickname" jdbcType="VARCHAR" property="userNickname" />
        <result column="user_password" jdbcType="VARCHAR" property="userPassword" />
        <result column="user_gender" jdbcType="BIT" property="userGender" />
        <result column="user_birthday" jdbcType="TIMESTAMP" property="userBirthday" />
        <result column="user_telephone" jdbcType="VARCHAR" property="userTelephone" />
        <result column="user_email" jdbcType="VARCHAR" property="userEmail" />
        <result column="user_motto" jdbcType="VARCHAR" property="userMotto" />
        <result column="user_synopsis" jdbcType="VARCHAR" property="userSynopsis" />
        <result column="user_nation_id" jdbcType="INTEGER" property="userNationId" />
        <result column="user_province_id" jdbcType="INTEGER" property="userProvinceId" />
        <result column="user_city_id" jdbcType="INTEGER" property="userCityId" />
        <result column="user_userstate_id" jdbcType="INTEGER" property="userUserstateId" />
        <result column="user_realname" jdbcType="VARCHAR" property="userRealname" />
        <result column="user_age" jdbcType="INTEGER" property="userAge" />
        <result column="user_vocation" jdbcType="VARCHAR" property="userVocation" />
        <result column="user_headportrait" jdbcType="VARCHAR" property="userHeadportrait" />
        <result column="user_password_salt" jdbcType="VARCHAR" property="userPasswordSalt" />
    </resultMap>

    <resultMap id="CustomFriendsResultMap" type="cn.lastlysly.pojo.CustomFriendsInfo">
       <result column="friends_userid" property="customFriendsUserId" /><!--好友归属用户ID-->
       <result column="user_id" property="customFriendsFriendsId" /><!--好友的ID-->
       <result column="user_login_id" property="customFriendsLoginId" /><!--好友的登陆账号-->

       <result column="user_nickname" property="customFriendsNickName" /><!--好友昵称-->
       <result column="friends_remarks" property="customFriendsRemark" /><!--给好友的备注-->
       <result column="friendgroups_name" property="customFriendsGroupName" /><!--好友所在分组的组名-->
       <result column="user_email" property="customFriendsEmail" /><!--好友的邮箱-->
       <result column="user_telephone" property="customFriendsTel" /><!--好友电话号码-->
       <result column="user_motto" property="customFriendsMotto" /><!--好友座右铭-->
       <result column="user_headportrait" property="customFriendsHeadportrait" /><!--好友头像-->
       <result column="user_gender" property="customFriendsGender" /><!--好友性别-->
       <result column="user_age" property="customFriendsAge" /><!--好友年龄-->
    </resultMap>

    <!--通过用户ID获取好友列表-->
    <select id="selectCustomFriendsInfoByUserId" parameterType="java.util.Map" resultMap="CustomFriendsResultMap">
        select userinfo_sheet.*,friends_sheet.*,friendgroups_sheet.friendgroups_name from
         friends_sheet join userinfo_sheet on friends_sheet.friends_friendid = userinfo_sheet.user_id
          join friendgroups_sheet on friends_sheet.friends_friendgroupsid = friendgroups_sheet.friendgroups_id
           where friends_sheet.friends_userid = #{userId};
    </select>

    <!--通过用户ID和朋友ID获取该好友详细信息-->
    <select id="selectFriendsInfoByUserIdandFriendId" parameterType="java.util.Map" resultMap="CustomFriendsResultMap">
        select userinfo_sheet.*,friends_sheet.*,friendgroups_sheet.friendgroups_name from
         friends_sheet join userinfo_sheet on friends_sheet.friends_friendid = userinfo_sheet.user_id
          join friendgroups_sheet on friends_sheet.friends_friendgroupsid = friendgroups_sheet.friendgroups_id
           where friends_sheet.friends_userid = #{userId} and friends_sheet.friends_friendid=#{friendId};
    </select>

    <!--通过用户登录账号或用户昵称查询-->
    <select id="selectNewFriendsByLoginIdOrNickname" parameterType="java.util.Map" resultMap="MyBaseResultMap">
        select * from userinfo_sheet where
        user_nickname = #{loginIdOrNickname}
        or user_login_id = #{loginIdOrNickname}
    </select>

</mapper>